{"version":3,"sources":["redux/sidebar-reducer.js","redux/app-reducer.js","redux/redux-store.js","components/Header/Header.js","components/Header/HeaderContainer.js","components/Navigation/Navigation.js","components/App/App.js","index.js","redux/auth-reducer.js","components/Navigation/Navigation.module.scss","components/App/App.module.scss","components/Header/Header.module.scss","redux/profile-reducer.js","assets/preloader.svg","components/common/Preloader/Preloader.jsx","api/api.js","redux/dialogs-reducer.js","utils/object-helpers.js","redux/users-reducer.js"],"names":["initialState","sidebarReducer","state","INITIALIZED_SUCCESS","initialized","appReducer","action","type","rootReducer","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","sidebar","usersPage","usersReducer","auth","authReducer","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Header","props","className","s","header","loginBlock","isAuth","login","onClick","logout","to","HeaderContainer","this","React","Component","connect","Navigation","nav","title","nav__item","ProfileContainer","lazy","DialogsContainer","UsersContainer","Login","App","initializeApp","content","fallback","path","element","Preloader","dispatch","promise","getAuthUserData","Promise","all","then","ReactDOM","render","document","getElementById","SET_USER_DATA","GET_CAPTCHA_URL_SUCCESS","userId","email","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","a","authAPI","authMe","data","resultCode","id","password","rememberMe","captcha","getCaptchaUrl","message","messages","length","stopSubmit","_error","securityAPI","url","module","exports","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_STATUS","SAVE_PHOTO_SUCCESS","posts","likesCount","profile","status","addPostActionCreater","newPostText","setStatus","getUserProfile","profileAPI","getStatus","updateStatus","savePhoto","file","photos","saveProfile","getState","reject","newPost","filter","post","postId","src","preloader","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","response","unfollow","delete","follow","newStatus","put","formData","FormData","append","SEND_MESSAGE","dialogs","name","sendMessageCreater","newMessageBody","body","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","requestUsers","page","totalCount","followUnfollowFlow","apiMethod","actionCreator","bind","followed"],"mappings":"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","file":"static/js/main.af43b7bc.chunk.js","sourcesContent":["let initialState = {}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default sidebarReducer;","import { stopSubmit } from 'redux-form';\r\nimport { authAPI } from '../api/api'\r\nimport { getAuthUserData } from './auth-reducer';\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\nlet initialState = {\r\n    initialized: false,\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return { ...state, initialized: true };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nconst initializedSuccess = () => ({ type: INITIALIZED_SUCCESS })\r\nexport const initializeApp = () => dispatch => {\r\n    let promise = dispatch(getAuthUserData())\r\n    Promise.all([promise]).then(() => {\r\n        dispatch(initializedSuccess())\r\n    })\r\n\r\n}\r\n\r\nexport default appReducer;","import { legacy_createStore as createStore, combineReducers, applyMiddleware,compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport profileReducer from './profile-reducer';\r\nimport dialogsReducer from './dialogs-reducer';\r\nimport sidebarReducer from './sidebar-reducer';\r\nimport usersReducer from './users-reducer';\r\nimport authReducer from './auth-reducer';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport appReducer from './app-reducer';\r\n\r\nlet rootReducer = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nlet store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n// let store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nexport default store;","import React from 'react';\r\nimport s from './Header.module.scss';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n    return <div className={s.header}>\r\n        Шапка сайта\r\n        <div className={s.loginBlock}>\r\n            {props.isAuth\r\n                ? <div>{props.login} - <button onClick={props.logout}>LogOut</button></div>\r\n                : <NavLink to='/login'>Login</NavLink>\r\n            }\r\n\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport Header from './Header';\r\nimport { useSelector, useDispatch, connect } from 'react-redux';\r\nimport { logout } from '../../redux/auth-reducer';\r\n\r\nclass HeaderContainer extends React.Component {\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n});\r\n\r\nexport default connect(mapStateToProps, {  logout })(HeaderContainer);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//  const HeaderContainer = (props) => {\r\n    //     const state = useSelector(state => state.auth)\r\n    //     const dispatch = useDispatch()\r\n    //     const setAuthUserDataDispatch = ({ id, email, login }) => dispatch(setAuthUserData(id, email, login))\r\n    \r\n    //     React.useEffect(() => {\r\n    //         axios\r\n    //             .get(`https://social-network.samuraijs.com/api/1.0/auth/me`, {\r\n    //                 withCredentials: true,\r\n    //             })\r\n    //             .then((response) => {\r\n    //                 setAuthUserDataDispatch(response.data.data)\r\n    //             });\r\n    //     }, [])\r\n    //     console.log('state', state);\r\n    //     return <Header {...props} state={state} setAuthUserDataDispatch={setAuthUserDataDispatch} />\r\n    \r\n    // }\r\n    \r\n    // export default HeaderContainer;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Navigation.module.scss';\r\n\r\nfunction Navigation() {\r\n    return (\r\n        <div className={s.nav}>\r\n            <div className={s.title}> Навигационное меню </div>\r\n\r\n            <div className={s.nav__item}>\r\n                <NavLink to=\"/profile\">Profile</NavLink>\r\n            </div>\r\n            <div className={s.nav__item}>\r\n                <NavLink to=\"/dialogs\">Messages</NavLink>\r\n            </div>\r\n            <div className={s.nav__item}>\r\n                <NavLink to=\"/users\">Users</NavLink>\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Navigation;","import React, { lazy, Suspense } from 'react';\nimport s from './App.module.scss';\nimport HeaderContainer from '../Header/HeaderContainer';\nimport Navigation from '../Navigation/Navigation';\nimport { Route, Routes } from 'react-router-dom';\nimport { connect } from 'react-redux'\nimport { initializeApp } from '../../redux/app-reducer';\nimport { Preloader } from '../common/Preloader/Preloader';\nconst ProfileContainer = lazy(() => import('../Profile/ProfileContainer'))\nconst DialogsContainer = lazy(() => import('../Dialogs/DialogsContainer'))\nconst UsersContainer = lazy(() => import('../Users/UsersContainer'))\nconst Login = lazy(() => import('../Login/Login'))\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp()\n  }\n\n  render() {\n    if (!this.props.initialized) {\n      return <Preloader />\n    }\n    return (\n      <div className={s.App}>\n        <HeaderContainer />\n        <Navigation />\n\n        <div className={s.content}>\n          <Suspense fallback={<div>Loading...</div>}>\n            <Routes>\n              <Route path='/dialogs' element={<DialogsContainer />} />\n              <Route path='/profile' element={<ProfileContainer />} >\n                <Route path=':userId' element={<ProfileContainer />} />\n              </Route>\n              <Route path='/users' element={<UsersContainer />} />\n              <Route path='/login' element={<Login />} />\n            </Routes>\n          </Suspense>\n        </div>\n      </div>\n    );\n  }\n\n}\nconst mapStateToProps = (state) => ({\n  initialized: state.app.initialized,\n})\n\nexport default connect(mapStateToProps, { initializeApp })(App);\n","import store from './redux/redux-store';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport { HashRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\n\nReactDOM.render(\n    // <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <HashRouter>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </HashRouter>,\n    document.getElementById('root')\n);\n\n\n","import { stopSubmit } from 'redux-form';\r\nimport { authAPI, securityAPI } from '../api/api'\r\n\r\nconst SET_USER_DATA = 'SET_USER_DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'GET_CAPTCHA_URL_SUCCESS';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null,\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return { ...state, ...action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (userId, email, login, isAuth) => ({ type: SET_USER_DATA, payload: { userId, email, login, isAuth } })\r\nexport const getCaptchaUrlSuccess = (captchaUrl) => ({ type: GET_CAPTCHA_URL_SUCCESS, payload: { captchaUrl } })\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n    const data = await authAPI.authMe()\r\n    if (data.resultCode === 0) {\r\n        const { id, login, email } = data.data;\r\n        dispatch(setAuthUserData(id, email, login, true));\r\n    }\r\n}\r\nexport const login = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n    const data = await authAPI.login(email, password, rememberMe, captcha)\r\n    if (data.resultCode === 0) {\r\n        dispatch(getAuthUserData())\r\n    } else {\r\n        if (data.resultCode === 10) {\r\n            dispatch(getCaptchaUrl())\r\n        }\r\n        const message = data.messages.length > 0 ? data.messages[0] : 'Some error'\r\n        const action = stopSubmit('login', { _error: message })\r\n        dispatch(action)\r\n    }\r\n}\r\nexport const logout = () => async (dispatch) => {\r\n    const response = await authAPI.logout()\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n    const data = await securityAPI.getCaptchaUrl()\r\n    const captchaUrl = data.url\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\nexport default authReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__2J0oM\",\"nav__item\":\"Navigation_nav__item__1NMZ9\",\"title\":\"Navigation_title__eaAEu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2D-eb\",\"content\":\"App_content__1Z6Zu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1W_Jk\",\"loginBlock\":\"Header_loginBlock__3Ipvt\"};","import { stopSubmit } from 'redux-form';\r\nimport { profileAPI } from '../api/api'\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst DELETE_POST = 'DELETE_POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE_PHOTO_SUCCESS';\r\n\r\n\r\nlet initialState = {\r\n    posts: [\r\n        { id: 1, message: 'Post1', likesCount: 12 },\r\n        { id: 2, message: 'Post2', likesCount: 34 },\r\n        { id: 3, message: 'Post3', likesCount: 52 },\r\n        { id: 4, message: 'Post4', likesCount: 42 },\r\n        { id: 5, message: 'Post5', likesCount: 18 },\r\n        { id: 6, message: 'Post6', likesCount: 62 },\r\n    ],\r\n    profile: null,\r\n    status: '',\r\n}\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost = {\r\n                id: 7,\r\n                message: action.payload.newPostText,\r\n                likesCount: 0\r\n            };\r\n            return { ...state, posts: [...state.posts, newPost], newPostText: '' };\r\n        case DELETE_POST:\r\n            return { ...state, posts: state.posts.filter(post => action.payload.postId !== post.id) }\r\n        case SET_USER_PROFILE:\r\n            return { ...state, profile: action.payload.profile }\r\n        case SET_STATUS:\r\n            return { ...state, status: action.payload.status }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return { ...state, profile: { ...state.profile, photos: action.payload.photos } }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostActionCreater = (newPostText) => ({ type: ADD_POST, payload: { newPostText } })\r\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, payload: { profile } })\r\nexport const setStatus = (status) => ({ type: SET_STATUS, payload: { status } })\r\nexport const deletePost = (postId) => ({ type: DELETE_POST, payload: { postId } })\r\nexport const savePhotoSuccess = (photos) => ({ type: SAVE_PHOTO_SUCCESS, payload: { photos } })\r\n\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n    let data = await profileAPI.getUserProfile(userId)\r\n    dispatch(setUserProfile(data));\r\n}\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    let data = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(data));\r\n}\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    let data = await profileAPI.updateStatus(status)\r\n    if (!data.resultCode) { dispatch(setStatus(status)) }\r\n}\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    let data = await profileAPI.savePhoto(file)\r\n    if (!data.resultCode) { dispatch(savePhotoSuccess(data.data.photos)) }\r\n}\r\nexport const saveProfile = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.userId\r\n    let data = await profileAPI.saveProfile(profile)\r\n    if (!data.resultCode) {\r\n        dispatch(getUserProfile(userId))\r\n    } else {\r\n        dispatch(stopSubmit('edit-profile', { _error: data.messages[0] }))\r\n        return Promise.reject(data.messages[0])\r\n    }\r\n}\r\n\r\n\r\nexport default profileReducer;","export default __webpack_public_path__ + \"static/media/preloader.ea356991.svg\";","import React from \"react\";\r\nimport preloader from \"../../../assets/preloader.svg\";\r\n\r\nexport const Preloader = () => {\r\n    return (\r\n        <div>\r\n            <img src={preloader} />\r\n        </div>\r\n    );\r\n};\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n    headers: {\r\n        \"API-KEY\": \"e82d0870-e644-47bb-8212-44d44c6489be\",\r\n    }\r\n})\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n    unfollow(userId) {\r\n        return instance.delete(`follow/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    follow(userId) {\r\n        return instance.post(`follow/` + userId)\r\n            .then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    authMe() {\r\n        return instance.get(`auth/me`)\r\n            .then(response => response.data)\r\n    },\r\n    login(email, password, rememberMe = false, captcha = null) {\r\n        return instance.post(`auth/login`, { email, password, rememberMe, captcha })\r\n            .then(response => response.data)\r\n    },\r\n    logout() {\r\n        return instance.delete(`auth/login`)\r\n    },\r\n}\r\n\r\nexport const profileAPI = {\r\n    getUserProfile(userId) {\r\n        return instance.get(`profile/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    updateStatus(newStatus) {\r\n        return instance.put(`profile/status`, { status: newStatus })\r\n            .then(response => response.data)\r\n    },\r\n    savePhoto(file) {\r\n        const formData = new FormData()\r\n        formData.append('image', file)\r\n        return instance.put(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n            .then(response => response.data)\r\n    },\r\n    saveProfile(profile) {\r\n        return instance.put(`profile`, profile)\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get(`security/get-captcha-url`)\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\n\r\n","const SEND_MESSAGE = 'SEND_MESSAGE';\r\n\r\nlet initialState = {\r\n    dialogs: [\r\n        { id: 1, name: 'Viktor' },\r\n        { id: 2, name: 'Sveta' },\r\n        { id: 3, name: 'Igor' },\r\n        { id: 4, name: 'Masha' },\r\n        { id: 5, name: 'Petya' },\r\n        { id: 6, name: 'Viсtoria' }\r\n    ],\r\n    messages: [\r\n        { id: 1, message: 'Hi' },\r\n        { id: 2, message: 'Bye' },\r\n        { id: 3, message: 'Hello' },\r\n        { id: 4, message: 'Mess' },\r\n        { id: 5, message: 'Mess123' },\r\n        { id: 6, message: 'Mess456' },\r\n    ],\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            let body = action.payload.newMessageBody;\r\n            return { ...state, messages: [...state.messages, { id: 7, message: body }] };\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\n\r\nexport const sendMessageCreater = (newMessageBody) => ({ type: SEND_MESSAGE, payload: { newMessageBody } })\r\n\r\n\r\nexport default dialogsReducer;","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return { ...u, ...newObjProps }\r\n        }\r\n        return u\r\n    })\r\n}\r\n\r\n","import { usersAPI } from '../api/api'\r\nimport { updateObjectInArray } from '../utils/object-helpers';\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET_USERS';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_TOTAL_COUNT = 'SET_TOTAL_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: [],\r\n\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            // return { ...state, users: state.users.map(item => item.id === action.payload.id ? { ...item, followed: true } : item) };\r\n            return { ...state, users: updateObjectInArray(state.users, action.payload.id, 'id', { followed: true }) };\r\n        case UNFOLLOW:\r\n            // return { ...state, users: state.users.map(item => item.id === action.payload.id ? { ...item, followed: false } : item) };\r\n            return { ...state, users: updateObjectInArray(state.users, action.payload.id, 'id', { followed: false }) };\r\n        case SET_USERS:\r\n            return { ...state, users: action.payload.users };\r\n        case SET_CURRENT_PAGE:\r\n            return { ...state, currentPage: action.payload.currentPage }\r\n        case SET_TOTAL_COUNT:\r\n            return { ...state, totalUsersCount: action.payload.totalUsersCount }\r\n        case TOGGLE_IS_FETCHING:\r\n            return { ...state, isFetching: action.payload.isFetching }\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter((id) => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\n\r\nexport const followSuccess = (id) => ({ type: FOLLOW, payload: { id } })\r\nexport const unfollowSuccess = (id) => ({ type: UNFOLLOW, payload: { id } })\r\nexport const setUsers = (users) => ({ type: SET_USERS, payload: { users } })\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, payload: { currentPage } })\r\nexport const setTotalUsersCount = (totalUsersCount) => ({ type: SET_TOTAL_COUNT, payload: { totalUsersCount } })\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, payload: { isFetching } })\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({ type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId })\r\n\r\nexport const requestUsers = (page, pageSize) => async (dispatch) => {\r\n    dispatch(toggleIsFetching(true));\r\n    dispatch(setCurrentPage(page));\r\n    const data = await usersAPI\r\n        .getUsers(page, pageSize)\r\n    dispatch(toggleIsFetching(false));\r\n    dispatch(setUsers(data.items));\r\n    dispatch(setTotalUsersCount(data.totalCount));\r\n}\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleFollowingProgress(true, userId));\r\n    const data = await apiMethod(userId)\r\n    !data.resultCode && dispatch(actionCreator(userId));\r\n    dispatch(toggleFollowingProgress(false, userId));\r\n}\r\nexport const follow = (userId) => async (dispatch) => {\r\n    let apiMethod = usersAPI.follow.bind(usersAPI)\r\n    let actionCreator = followSuccess\r\n    followUnfollowFlow(dispatch, userId, apiMethod, actionCreator)\r\n}\r\nexport const unfollow = (userId) => async (dispatch) => {\r\n    let apiMethod = usersAPI.unfollow.bind(usersAPI)\r\n    let actionCreator = unfollowSuccess\r\n    followUnfollowFlow(dispatch, userId, apiMethod, actionCreator)\r\n}\r\n\r\n\r\n\r\nexport default usersReducer;\r\n\r\n"],"sourceRoot":""}