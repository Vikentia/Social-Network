{"version":3,"sources":["redux/sidebar-reducer.js","redux/app-reducer.js","redux/redux-store.js","components/Header/Header.js","components/Header/HeaderContainer.js","components/Navigation/Navigation.js","components/App/App.js","index.js","redux/auth-reducer.js","components/Navigation/Navigation.module.scss","components/App/App.module.scss","components/Header/Header.module.scss","redux/profile-reducer.js","assets/preloader.svg","components/common/Preloader/Preloader.jsx","redux/dialogs-reducer.js","api/api.js","utils/object-helpers.js","redux/users-reducer.js"],"names":["initialState","sidebarReducer","state","INITIALIZED_SUCCESS","initialized","appReducer","action","type","rootReducer","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","sidebar","usersPage","usersReducer","auth","authReducer","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Header","props","className","s","header","loginBlock","isAuth","login","onClick","logout","to","HeaderContainer","this","React","Component","connect","Navigation","nav","title","nav__item","ProfileContainer","lazy","DialogsContainer","UsersContainer","Login","App","initializeApp","content","fallback","path","element","Preloader","dispatch","promise","getAuthUserData","Promise","all","then","ReactDOM","render","document","getElementById","SET_USER_DATA","userId","email","setAuthUserData","payload","a","authAPI","authMe","data","resultCode","id","password","rememberMe","message","messages","length","stopSubmit","_error","module","exports","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_STATUS","SAVE_PHOTO_SUCCESS","posts","likesCount","profile","status","addPostActionCreater","newPostText","setStatus","getUserProfile","profileAPI","getStatus","updateStatus","savePhoto","file","photos","newPost","filter","post","postId","src","preloader","SEND_MESSAGE","dialogs","name","sendMessageCreater","newMessageBody","body","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","response","unfollow","delete","follow","newStatus","put","formData","FormData","append","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","requestUsers","page","totalCount","followUnfollowFlow","apiMethod","actionCreator","bind","followed"],"mappings":"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","file":"static/js/main.5be660e9.chunk.js","sourcesContent":["let initialState = {}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default sidebarReducer;","import { stopSubmit } from 'redux-form';\r\nimport { authAPI } from '../api/api'\r\nimport { getAuthUserData } from './auth-reducer';\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\nlet initialState = {\r\n    initialized: false,\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return { ...state, initialized: true };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nconst initializedSuccess = () => ({ type: INITIALIZED_SUCCESS })\r\nexport const initializeApp = () => dispatch => {\r\n    let promise = dispatch(getAuthUserData())\r\n    Promise.all([promise]).then(() => {\r\n        dispatch(initializedSuccess())\r\n    })\r\n\r\n}\r\n\r\nexport default appReducer;","import { legacy_createStore as createStore, combineReducers, applyMiddleware,compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport profileReducer from './profile-reducer';\r\nimport dialogsReducer from './dialogs-reducer';\r\nimport sidebarReducer from './sidebar-reducer';\r\nimport usersReducer from './users-reducer';\r\nimport authReducer from './auth-reducer';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport appReducer from './app-reducer';\r\n\r\nlet rootReducer = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nlet store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n// let store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nexport default store;","import React from 'react';\r\nimport s from './Header.module.scss';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n    return <div className={s.header}>\r\n        Шапка сайта\r\n        <div className={s.loginBlock}>\r\n            {props.isAuth\r\n                ? <div>{props.login} - <button onClick={props.logout}>LogOut</button></div>\r\n                : <NavLink to='/login'>Login</NavLink>\r\n            }\r\n\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport Header from './Header';\r\nimport { useSelector, useDispatch, connect } from 'react-redux';\r\nimport { logout } from '../../redux/auth-reducer';\r\n\r\nclass HeaderContainer extends React.Component {\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n});\r\n\r\nexport default connect(mapStateToProps, {  logout })(HeaderContainer);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//  const HeaderContainer = (props) => {\r\n    //     const state = useSelector(state => state.auth)\r\n    //     const dispatch = useDispatch()\r\n    //     const setAuthUserDataDispatch = ({ id, email, login }) => dispatch(setAuthUserData(id, email, login))\r\n    \r\n    //     React.useEffect(() => {\r\n    //         axios\r\n    //             .get(`https://social-network.samuraijs.com/api/1.0/auth/me`, {\r\n    //                 withCredentials: true,\r\n    //             })\r\n    //             .then((response) => {\r\n    //                 setAuthUserDataDispatch(response.data.data)\r\n    //             });\r\n    //     }, [])\r\n    //     console.log('state', state);\r\n    //     return <Header {...props} state={state} setAuthUserDataDispatch={setAuthUserDataDispatch} />\r\n    \r\n    // }\r\n    \r\n    // export default HeaderContainer;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Navigation.module.scss';\r\n\r\nfunction Navigation() {\r\n    return (\r\n        <div className={s.nav}>\r\n            <div className={s.title}> Навигационное меню </div>\r\n\r\n            <div className={s.nav__item}>\r\n                <NavLink to=\"/profile\">Profile</NavLink>\r\n            </div>\r\n            <div className={s.nav__item}>\r\n                <NavLink to=\"/dialogs\">Messages</NavLink>\r\n            </div>\r\n            <div className={s.nav__item}>\r\n                <NavLink to=\"/users\">Users</NavLink>\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Navigation;","import React, { lazy, Suspense } from 'react';\nimport s from './App.module.scss';\nimport HeaderContainer from '../Header/HeaderContainer';\nimport Navigation from '../Navigation/Navigation';\nimport { Route, Routes } from 'react-router-dom';\nimport { connect } from 'react-redux'\nimport { initializeApp } from '../../redux/app-reducer';\nimport { Preloader } from '../common/Preloader/Preloader';\nconst ProfileContainer = lazy(() => import('../Profile/ProfileContainer'))\nconst DialogsContainer = lazy(() => import('../Dialogs/DialogsContainer'))\nconst UsersContainer = lazy(() => import('../Users/UsersContainer'))\nconst Login = lazy(() => import('../Login/Login'))\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp()\n  }\n\n  render() {\n    if (!this.props.initialized) {\n      return <Preloader />\n    }\n    return (\n      <div className={s.App}>\n        <HeaderContainer />\n        <Navigation />\n\n        <div className={s.content}>\n          <Suspense fallback={<div>Loading...</div>}>\n            <Routes>\n              <Route path='/dialogs' element={<DialogsContainer />} />\n              <Route path='/profile' element={<ProfileContainer />} >\n                <Route path=':userId' element={<ProfileContainer />} />\n              </Route>\n              <Route path='/users' element={<UsersContainer />} />\n              <Route path='/login' element={<Login />} />\n            </Routes>\n          </Suspense>\n        </div>\n      </div>\n    );\n  }\n\n}\nconst mapStateToProps = (state) => ({\n  initialized: state.app.initialized,\n})\n\nexport default connect(mapStateToProps, { initializeApp })(App);\n","import store from './redux/redux-store';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport { HashRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\n\nReactDOM.render(\n    // <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <HashRouter>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </HashRouter>,\n    document.getElementById('root')\n);\n\n\n","import { stopSubmit } from 'redux-form';\r\nimport { authAPI } from '../api/api'\r\n\r\nconst SET_USER_DATA = 'SET_USER_DATA';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return { ...state, ...action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (userId, email, login, isAuth) => ({ type: SET_USER_DATA, payload: { userId, email, login, isAuth } })\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n    let data = await authAPI.authMe()\r\n    if (data.resultCode === 0) {\r\n        let { id, login, email } = data.data;\r\n        dispatch(setAuthUserData(id, email, login, true));\r\n    }\r\n}\r\nexport const login = (email, password, rememberMe) => async (dispatch) => {\r\n    let data = await authAPI.login(email, password, rememberMe)\r\n    if (data.resultCode === 0) {\r\n        dispatch(getAuthUserData())\r\n    } else {\r\n        let message = data.messages.length > 0 ? data.messages[0] : 'Some error'\r\n        let action = stopSubmit('login', { _error: message })\r\n        dispatch(action)\r\n    }\r\n}\r\nexport const logout = () => async (dispatch) => {\r\n    let response = await authAPI.logout()\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport default authReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__2J0oM\",\"nav__item\":\"Navigation_nav__item__1NMZ9\",\"title\":\"Navigation_title__eaAEu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2D-eb\",\"content\":\"App_content__1Z6Zu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1W_Jk\",\"loginBlock\":\"Header_loginBlock__3Ipvt\"};","import { profileAPI } from '../api/api'\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst DELETE_POST = 'DELETE_POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE_PHOTO_SUCCESS';\r\n\r\n\r\nlet initialState = {\r\n    posts: [\r\n        { id: 1, message: 'Post1', likesCount: 12 },\r\n        { id: 2, message: 'Post2', likesCount: 34 },\r\n        { id: 3, message: 'Post3', likesCount: 52 },\r\n        { id: 4, message: 'Post4', likesCount: 42 },\r\n        { id: 5, message: 'Post5', likesCount: 18 },\r\n        { id: 6, message: 'Post6', likesCount: 62 },\r\n    ],\r\n    profile: null,\r\n    status: '',\r\n}\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost = {\r\n                id: 7,\r\n                message: action.payload.newPostText,\r\n                likesCount: 0\r\n            };\r\n            return { ...state, posts: [...state.posts, newPost], newPostText: '' };\r\n        case DELETE_POST:\r\n            return { ...state, posts: state.posts.filter(post => action.payload.postId !== post.id) }\r\n        case SET_USER_PROFILE:\r\n            return { ...state, profile: action.payload.profile }\r\n        case SET_STATUS:\r\n            return { ...state, status: action.payload.status }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return { ...state, profile: { ...state.profile, photos: action.payload.photos } }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostActionCreater = (newPostText) => ({ type: ADD_POST, payload: { newPostText } })\r\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, payload: { profile } })\r\nexport const setStatus = (status) => ({ type: SET_STATUS, payload: { status } })\r\nexport const deletePost = (postId) => ({ type: DELETE_POST, payload: { postId } })\r\nexport const savePhotoSuccess = (photos) => ({ type: SAVE_PHOTO_SUCCESS, payload: { photos } })\r\n\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n    let data = await profileAPI.getUserProfile(userId)\r\n    dispatch(setUserProfile(data));\r\n}\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    let data = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(data));\r\n}\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    let data = await profileAPI.updateStatus(status)\r\n    if (!data.resultCode) { dispatch(setStatus(status)) }\r\n}\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    let data = await profileAPI.savePhoto(file)\r\n    if (!data.resultCode) { dispatch(savePhotoSuccess(data.data.photos)) }\r\n}\r\n\r\n\r\nexport default profileReducer;","export default __webpack_public_path__ + \"static/media/preloader.ea356991.svg\";","import React from \"react\";\r\nimport preloader from \"../../../assets/preloader.svg\";\r\n\r\nexport const Preloader = () => {\r\n    return (\r\n        <div>\r\n            <img src={preloader} />\r\n        </div>\r\n    );\r\n};\r\n","const SEND_MESSAGE = 'SEND_MESSAGE';\r\n\r\nlet initialState = {\r\n    dialogs: [\r\n        { id: 1, name: 'Viktor' },\r\n        { id: 2, name: 'Sveta' },\r\n        { id: 3, name: 'Igor' },\r\n        { id: 4, name: 'Masha' },\r\n        { id: 5, name: 'Petya' },\r\n        { id: 6, name: 'Viсtoria' }\r\n    ],\r\n    messages: [\r\n        { id: 1, message: 'Hi' },\r\n        { id: 2, message: 'Bye' },\r\n        { id: 3, message: 'Hello' },\r\n        { id: 4, message: 'Mess' },\r\n        { id: 5, message: 'Mess123' },\r\n        { id: 6, message: 'Mess456' },\r\n    ],\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            let body = action.payload.newMessageBody;\r\n            return { ...state, messages: [...state.messages, { id: 7, message: body }] };\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\n\r\nexport const sendMessageCreater = (newMessageBody) => ({ type: SEND_MESSAGE, payload: { newMessageBody } })\r\n\r\n\r\nexport default dialogsReducer;","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n    headers: {\r\n        \"API-KEY\": \"e82d0870-e644-47bb-8212-44d44c6489be\",\r\n    }\r\n})\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n    unfollow(userId) {\r\n        return instance.delete(`follow/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    follow(userId) {\r\n        return instance.post(`follow/` + userId)\r\n            .then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    authMe() {\r\n        return instance.get(`auth/me`)\r\n            .then(response => response.data)\r\n    },\r\n    login(email, password, rememberMe = false) {\r\n        return instance.post(`auth/login`, { email, password, rememberMe })\r\n        .then(response => response.data)\r\n    },\r\n    logout() {\r\n        return instance.delete(`auth/login`)\r\n    },\r\n}\r\n\r\nexport const profileAPI = {\r\n    getUserProfile(userId) {\r\n        return instance.get(`profile/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    updateStatus(newStatus) {\r\n        return instance.put(`profile/status`, { status: newStatus })\r\n            .then(response => response.data)\r\n    },\r\n    savePhoto(file) {\r\n        const formData = new FormData()\r\n        formData.append('image', file)\r\n        return instance.put(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type':'multipart/form-data'\r\n            }\r\n        })\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\n\r\n\r\n","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return { ...u, ...newObjProps }\r\n        }\r\n        return u\r\n    })\r\n}\r\n\r\n","import { usersAPI } from '../api/api'\r\nimport { updateObjectInArray } from '../utils/object-helpers';\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET_USERS';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_TOTAL_COUNT = 'SET_TOTAL_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: [],\r\n\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            // return { ...state, users: state.users.map(item => item.id === action.payload.id ? { ...item, followed: true } : item) };\r\n            return { ...state, users: updateObjectInArray(state.users, action.payload.id, 'id', { followed: true }) };\r\n        case UNFOLLOW:\r\n            // return { ...state, users: state.users.map(item => item.id === action.payload.id ? { ...item, followed: false } : item) };\r\n            return { ...state, users: updateObjectInArray(state.users, action.payload.id, 'id', { followed: false }) };\r\n        case SET_USERS:\r\n            return { ...state, users: action.payload.users };\r\n        case SET_CURRENT_PAGE:\r\n            return { ...state, currentPage: action.payload.currentPage }\r\n        case SET_TOTAL_COUNT:\r\n            return { ...state, totalUsersCount: action.payload.totalUsersCount }\r\n        case TOGGLE_IS_FETCHING:\r\n            return { ...state, isFetching: action.payload.isFetching }\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter((id) => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\n\r\nexport const followSuccess = (id) => ({ type: FOLLOW, payload: { id } })\r\nexport const unfollowSuccess = (id) => ({ type: UNFOLLOW, payload: { id } })\r\nexport const setUsers = (users) => ({ type: SET_USERS, payload: { users } })\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, payload: { currentPage } })\r\nexport const setTotalUsersCount = (totalUsersCount) => ({ type: SET_TOTAL_COUNT, payload: { totalUsersCount } })\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, payload: { isFetching } })\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({ type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId })\r\n\r\nexport const requestUsers = (page, pageSize) => async (dispatch) => {\r\n    dispatch(toggleIsFetching(true));\r\n    dispatch(setCurrentPage(page));\r\n    const data = await usersAPI\r\n        .getUsers(page, pageSize)\r\n    dispatch(toggleIsFetching(false));\r\n    dispatch(setUsers(data.items));\r\n    dispatch(setTotalUsersCount(data.totalCount));\r\n}\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleFollowingProgress(true, userId));\r\n    const data = await apiMethod(userId)\r\n    !data.resultCode && dispatch(actionCreator(userId));\r\n    dispatch(toggleFollowingProgress(false, userId));\r\n}\r\nexport const follow = (userId) => async (dispatch) => {\r\n    let apiMethod = usersAPI.follow.bind(usersAPI)\r\n    let actionCreator = followSuccess\r\n    followUnfollowFlow(dispatch, userId, apiMethod, actionCreator)\r\n}\r\nexport const unfollow = (userId) => async (dispatch) => {\r\n    let apiMethod = usersAPI.unfollow.bind(usersAPI)\r\n    let actionCreator = unfollowSuccess\r\n    followUnfollowFlow(dispatch, userId, apiMethod, actionCreator)\r\n}\r\n\r\n\r\n\r\nexport default usersReducer;\r\n\r\n"],"sourceRoot":""}